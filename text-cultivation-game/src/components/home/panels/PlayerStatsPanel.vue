<template>
  <div class="space-y-4 p-2 text-xs">
    <!-- Main Attributes -->
    <div class="grid grid-cols-2 gap-x-4 gap-y-2">
        <div class="flex items-center justify-between border-b border-dashed border-neutral-800 pb-1">
            <div class="flex items-center gap-1 text-neutral-500">
                <XianxiaIcon src="ui_stat_atk" fallback="üó°Ô∏è" size="xs" />
                <span>ÊîªÂáª</span>
            </div>
            <span class="text-amber-600 font-mono">{{ stats.atk }}</span>
        </div>
        <div class="flex items-center justify-between border-b border-dashed border-neutral-800 pb-1">
            <div class="flex items-center gap-1 text-neutral-500">
                <XianxiaIcon src="ui_stat_def" fallback="üõ°Ô∏è" size="xs" />
                <span>Èò≤Âæ°</span>
            </div>
            <span class="text-blue-600 font-mono">{{ stats.def }}</span>
        </div>
        <div class="flex items-center justify-between border-b border-dashed border-neutral-800 pb-1">
            <div class="flex items-center gap-1 text-neutral-500">
                <XianxiaIcon src="ui_stat_hp" fallback="‚ù§Ô∏è" size="xs" />
                <span>Ê∞îË°Ä</span>
            </div>
            <span class="text-neutral-300 font-mono">{{ Math.floor(stats.hp) }}/{{ stats.maxHp }}</span>
        </div>
        <div class="flex items-center justify-between border-b border-dashed border-neutral-800 pb-1">
            <div class="flex items-center gap-1 text-neutral-500">
                <XianxiaIcon src="ui_stat_mp" fallback="üíß" size="xs" />
                <span>ÁÅµÂäõ</span>
            </div>
            <span class="text-sky-600 font-mono">{{ Math.floor(stats.mp) }}/{{ stats.maxMp }}</span>
        </div>
        <div class="flex items-center justify-between border-b border-dashed border-neutral-800 pb-1">
            <div class="flex items-center gap-1 text-neutral-500">
                <span class="text-lg leading-none">‚ö°</span>
                <span>Êö¥Âáª</span>
            </div>
            <span class="text-neutral-400 font-mono">{{ (stats.critRate * 100).toFixed(1) }}%</span>
        </div>
    </div>

    <!-- Equipment Section -->
    <div>
        <div class="mt-4 mb-2 text-center text-neutral-600 text-[10px] tracking-widest flex items-center gap-2">
            <div class="h-px bg-neutral-800 flex-1"></div>
            <span>Êú¨ÂëΩÊ≥ïÂÆù</span>
            <div class="h-px bg-neutral-800 flex-1"></div>
        </div>
        <div class="space-y-1">
                <div class="flex justify-between items-center bg-black p-2 border border-neutral-800 rounded-sm">
                <span class="text-neutral-500 flex items-center gap-2">
                     <div class="w-6 h-6 bg-neutral-900 border border-neutral-800 flex items-center justify-center text-xs">Ê≠¶</div>
                     <span>Ê≠¶Âô®</span>
                </span>
                <span class="text-amber-700">{{ getEquipName(equipment?.weapon) }}</span>
                </div>
                <div class="flex justify-between items-center bg-black p-2 border border-neutral-800 rounded-sm">
                <span class="text-neutral-500 flex items-center gap-2">
                     <div class="w-6 h-6 bg-neutral-900 border border-neutral-800 flex items-center justify-center text-xs">Áî≤</div>
                     <span>Ë°£Ë¢ç</span>
                </span>
                <span class="text-blue-700">{{ getEquipName(equipment?.armor) }}</span>
                </div>
                <div class="flex justify-between items-center bg-black p-2 border border-neutral-800 rounded-sm">
                <span class="text-neutral-500 flex items-center gap-2">
                     <div class="w-6 h-6 bg-neutral-900 border border-neutral-800 flex items-center justify-center text-xs">ÂÆù</div>
                    <span>Ê≥ïÂô®</span>
                </span>
                <span class="text-purple-700">{{ getEquipName(equipment?.accessory) }}</span>
                </div>
        </div>
    </div>

    <!-- Spirit Root -->
    <div>
        <div class="mt-4 mb-2 text-center text-neutral-600 text-[10px] tracking-widest flex items-center gap-2">
            <div class="h-px bg-neutral-800 flex-1"></div>
            <span>‰∫îË°åÁÅµÊ†π</span>
            <div class="h-px bg-neutral-800 flex-1"></div>
        </div>
        <div class="flex justify-between px-2 text-center bg-neutral-900/50 p-2 rounded">
            <div class="flex flex-col gap-1">
                <span class="text-yellow-700 font-bold">Èáë</span>
                <span class="text-neutral-500 font-mono">{{ spiritRoot.metal }}</span>
            </div>
            <div class="flex flex-col gap-1">
                <span class="text-green-700 font-bold">Êú®</span>
                <span class="text-neutral-500 font-mono">{{ spiritRoot.wood }}</span>
            </div>
            <div class="flex flex-col gap-1">
                <span class="text-blue-700 font-bold">Ê∞¥</span>
                <span class="text-neutral-500 font-mono">{{ spiritRoot.water }}</span>
            </div>
            <div class="flex flex-col gap-1">
                <span class="text-red-700 font-bold">ÁÅ´</span>
                <span class="text-neutral-500 font-mono">{{ spiritRoot.fire }}</span>
            </div>
            <div class="flex flex-col gap-1">
                <span class="text-amber-800 font-bold">Âúü</span>
                <span class="text-neutral-500 font-mono">{{ spiritRoot.earth }}</span>
            </div>
        </div>
    </div>

  </div>
</template>

<script setup lang="ts">
import { computed } from 'vue';
import { getItem } from '../../../core/constants/items';
import XianxiaIcon from '../../shared/XianxiaIcon.vue';

const props = defineProps<{
    stats: any;
    equipment: any;
    spiritRoot: any;
}>();

function getEquipName(id?: string) {
    if (!id) return 'Á©∫';
    return getItem(id)?.name || 'Êú™Áü•';
}
</script>
